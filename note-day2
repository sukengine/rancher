#day 2

---
p.47 Install OPA Gatekeeper
Main Menu -> Select rke-workload-cluster
Cluster menu -> Cluster Tools -> OPA Gatekeeper -> Install
---
p.47 OPA-Template link
https://raw.githubusercontent.com/open-policy-agent/gatekeeper-library/master/library/general/replicalimits/template.yaml

Example constraints-paramaters
https://github.com/open-policy-agent/gatekeeper-library/blob/master/library/general/containerlimits/samples/container-must-have-limits/constraint.yaml#L5
---
p.51 - Constraints-parameters
ranges:
- min_replicas: 1
- max_replicas: 2
---
p.59 - PromQL
(count by(cluster, node) (sum by(node, cpu) (node_cpu_seconds_total{job="node-exporter"} * on(namespace, pod) group_left(node) topk by(namespace, pod) (1, node_namespace_pod:kube_pod_info:)))) > 1
---
p.61 - Slack webhook
https://hooks.slack.com/services/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
https://hooks.slack.com/services/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
---
p.68 - Loki Repository URL
https://grafana.github.io/helm-charts
---
p.71 - Target
http://my-loki.loki:3100
---
p.72 - Output Buffer
timekey: 30s
timekey_use_utc: true
timekey_wait: 10s
flush_interval: 5sema for logging.banzaicloud.io.v1beta1.output.spec.awsElasticsearch.buffer

